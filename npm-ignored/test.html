<!DOCTYPE html>
<html lang="en">

<head>
    <script src="../browser.js"></script> <!-- Path to your bundled script -->
</head>

<body>

    <form id="fileUploadForm">
        <input type="file" id="fileInput" name="file">
        <button type="submit">Upload File</button>
    </form>

    <script>
        document.getElementById('fileUploadForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            // Initialize the KnackAPI with your configuration
            const knackAPI = new KnackAPI({
                auth: 'view-based',
                applicationId: "5c6c953b6a0ddb28d77b4f98",
                //No need for userToken or login when uploading files.
            });

            //Select the fileInput in the form
            const myFileInput = document.getElementById('fileInput');

            //Run the API call to upload file to Knack server
            try {
                const response = await knackAPI.uploadFileFromInput({
                    fileInput: myFileInput
                });
                console.log('File uploaded successfully:', response);

                //You can Use response.json.id as the value for a Knack "file upload" record field now

            } catch (error) {
                console.error('File upload failed:', error);
            }
        });
    </script>

</body>

</html>